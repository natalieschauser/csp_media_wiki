String.prototype.splitCSV = function(sep) {
      for (var foo = this.split(sep = sep || ","), x = foo.length - 1, tl; x >= 0; x--) {
              if (foo[x].replace(/"\s+$/, '"').charAt(foo[x].length - 1) == '"') {
                        if ((tl = foo[x].replace(/^\s+"/, '"')).length > 1 && tl.charAt(0) == '"') {
                                    foo[x] = foo[x].replace(/^\s*"|"\s*$/g, '').replace(/""/g, '"');
                                          } else if (x) {
                                                      foo.splice(x - 1, 2, [foo[x - 1], foo[x]].join(sep));
                                                            } else foo = foo.shift().split(sep).concat(foo);
                            } else foo[x].replace(/""/g, '"');
                } return foo;
};
